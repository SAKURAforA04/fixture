@*@using Fixture02.Models*@
@model  IEnumerable<Fixture02.Models.JigitemModel>

@using PagedList;
@using PagedList.Mvc;

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/FixtureMaster.cshtml";
}

<h2>Create</h2>


<table class="table">
    <tr>
        <th>@Html.DisplayNameFor(model => model.Code)</th>
        <th>@Html.DisplayNameFor(model => model.Name)</th>
        <th>@Html.DisplayNameFor(model => model.Location)</th>
        <th>已使用次数</th>
        <th>状态</th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        ViewBag.workcellId = Session["workcellId"];
        if (item.WorkcellID == ViewBag.workcellId)
        {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.JigitemCode)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Location)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.UsedCount)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.State)
            </td>
            <td>

                <input type="button" class="btn btn-primary" onclick="Values(this)"
                       jigitemcode1="@item.JigitemCode" itemid1="@item.ItemID" code1="@item.Code" seqid1="@item.SeqID" name1="@item.Name" familyid1="@item.FamilyID"
                       familyname1="@item.FamilyName" model1="@item.Model" partno1="@item.PartNo" usedcount1="@item.UsedCount" workcellid1="@item.WorkcellID" value="选择" />
            </td>
        </tr>
        }
    }

</table>
@Html.PagedListPager((IPagedList)Model, x => Url.Action("Create", new { page = x }))
@using (Html.BeginForm("Create", "Scraps", FormMethod.Post))
{
    <input type="text" name="ItemID" id="ItemID" />
    <input type="text" name="Code" id="Code" />
    <input type="text" name="SeqID" id="SeqID" />
    <input type="text" name="FamilyID" id="FamilyID" />
    <input type="text" name="FamilyName" id="FamilyName" />
    <input type="text" name="Model" id="Model" />
    <input type="text" name="PartNo" id="PartNo" />
    <input type="text" name="Count" id="Count" />
    <input type="text" name="WorkcellID" id="WorkcellID" />

    <div class="form-group">
        <div class="col-md-10" @*id="myModal"*@>
            <b>夹具编码：</b><input type="text" name="JigitemCode" id="JigitemCode" readonly="readonly" />
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-10" @*id="myModal"*@>
            <b>夹具名称：</b><input type="text" name="Name" id="Name" readonly="readonly" />
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-10">
            <b> 报废原因:</b><input type="text" name="Problem" />
        </div>
    </div>

    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="新增" class="btn btn-default" />
        </div>
    </div>


    <div>
        @Html.ActionLink("返回", "Index")
    </div>
}

<script>
    function Values(obj) {
        var thisobj = $(obj);

        var jigitemcode1 = thisobj.attr("jigitemcode1");
        var itemid1 = thisobj.attr("itemid1");
        var code1 = thisobj.attr("code1");
        var seqid1 = thisobj.attr("seqid1");
        var name1 = thisobj.attr("name1");
        var familyid1 = thisobj.attr("familyid1");
        var familyname1 = thisobj.attr("familyname1");
        var model1 = thisobj.attr("model1");
        var partno1 = thisobj.attr("partno1");
        var usedcount1 = thisobj.attr("usedcount1");
        var workcellid1 = thisobj.attr("workcellid1");

        $("#JigitemCode").val(jigitemcode1);
        $("#ItemID").val(itemid1);
        $("#Code").val(code1);
        $("#SeqID").val(seqid1);
        $("#Name").val(name1);
        $("#FamilyID").val(familyid1);
        $("#FamilyName").val(familyname1);
        $("#Model").val(model1);
        $("#PartNo").val(partno1);
        $("#Count").val(usedcount1);
        $("#WorkcellID").val(workcellid1);
    }
</script>
